<!DOCTYPE html><HTML lang="en"><head><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>Array wrappers · PencilFFTs.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script data-main="../assets/documenter.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" data-theme-name="documenter-dark" href="../assets/themes/documenter-dark.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="documenter-light" data-theme-primary="" href="../assets/themes/documenter-light.css" rel="stylesheet" type="text/css"/><script src="../assets/themeswap.js"></script><link href="../assets/custom.css" rel="stylesheet" type="text/css"/><script src="../assets/tomate.js"></script><script data-outdated-warner="">function maybeAddWarning () {
    const head = document.getElementsByTagName('head')[0];

    // Add a noindex meta tag (unless one exists) so that search engines don't index this version of the docs.
    if (document.body.querySelector('meta[name="robots"]') === null) {
        const meta = document.createElement('meta');
        meta.name = 'robots';
        meta.content = 'noindex';

        head.appendChild(meta);
    };

    // Add a stylesheet to avoid inline styling
    const style = document.createElement('style');
    style.type = 'text/css';
    style.appendChild(document.createTextNode('.outdated-warning-overlay {  position: fixed;  top: 0;  left: 0;  right: 0;  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);  z-index: 999;  background-color: #ffaba7;  color: rgba(0, 0, 0, 0.7);  border-bottom: 3px solid #da0b00;  padding: 10px 35px;  text-align: center;  font-size: 15px; }  .outdated-warning-overlay .outdated-warning-closer {    position: absolute;    top: calc(50% - 10px);    right: 18px;    cursor: pointer;    width: 12px; }  .outdated-warning-overlay a {    color: #2e63b8; }    .outdated-warning-overlay a:hover {      color: #363636; }'));
    head.appendChild(style);

    const div = document.createElement('div');
    div.classList.add('outdated-warning-overlay');
    const closer = document.createElement('div');
    closer.classList.add('outdated-warning-closer');

    // Icon by font-awesome (license: https://fontawesome.com/license, link: https://fontawesome.com/icons/times?style=solid)
    closer.innerHTML = '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times" class="svg-inline--fa fa-times fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path></svg>';
    closer.addEventListener('click', function () {
        document.body.removeChild(div);
    });
    let href = '/stable';
    if (window.documenterBaseURL) {
        href = window.documenterBaseURL + '/../stable';
    }
    div.innerHTML = 'This is an old version of the documentation. <br> <a href="' + href + '">Go to the newest version</a>.';
    div.appendChild(closer);
    document.body.appendChild(div);
};

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', maybeAddWarning);
} else {
    maybeAddWarning();
};
</script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img alt="PencilFFTs.jl logo" src="../assets/logo.svg"/></a><div class="docs-package-name"><span class="docs-autofit">PencilFFTs.jl</span></div><form action="../search/" class="docs-search"><input class="docs-search-query" id="documenter-search-query" name="q" placeholder="Search docs" type="text"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li><span class="tocitem">More examples</span><ul><li><a class="tocitem" href="../examples/in-place/">In-place transforms</a></li><li><a class="tocitem" href="../examples/gradient/">Gradient of a scalar field</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><input checked="" class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">MPI-distributed arrays</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../MPITopology/">MPI topology</a></li><li><a class="tocitem" href="../Pencils/">Pencil configurations</a></li><li class="is-active"><a class="tocitem" href="">Array wrappers</a><ul class="internal"><li><a class="tocitem" href="#Construction"><span>Construction</span></a></li><li><a class="tocitem" href="#Dimension-permutations"><span>Dimension permutations</span></a></li><li><a class="tocitem" href="#Global-views"><span>Global views</span></a></li><li><a class="tocitem" href="#Types"><span>Types</span></a></li><li><a class="tocitem" href="#Methods"><span>Methods</span></a></li></ul></li><li><a class="tocitem" href="../Transpositions/">Global MPI operations</a></li><li><a class="tocitem" href="../PencilArrays_timers/">Measuring performance</a></li><li><input class="collapse-toggle" id="menuitem-4-1-6" type="checkbox"/><label class="tocitem" for="menuitem-4-1-6"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PermutationUtils/">Permutation tools</a></li></ul></li></ul></li><li><a class="tocitem" href="../PencilIO/">Parallel I/O</a></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Distributed FFTs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PencilFFTs/">Distributed FFT plans</a></li><li><a class="tocitem" href="../Transforms/">Available transforms</a></li><li><a class="tocitem" href="../PencilFFTs_timers/">Measuring performance</a></li><li><input class="collapse-toggle" id="menuitem-4-3-4" type="checkbox"/><label class="tocitem" for="menuitem-4-3-4"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../GlobalFFTParams/">Global FFT parameters</a></li></ul></li></ul></li></ul></li><li><a class="tocitem" href="../benchmarks/">Benchmarks</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li><a class="is-disabled">MPI-distributed arrays</a></li><li class="is-active"><a href="">Array wrappers</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="">Array wrappers</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/jipolanco/PencilFFTs.jl/blob/master/docs/src/PencilArrays.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" href="#" id="documenter-settings-button" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" href="#" id="documenter-sidebar-button"></a></div></header><article class="content" id="documenter-page"><h1 id="PencilArrays_module"><a class="docs-heading-anchor" href="#PencilArrays_module">Array wrappers</a><a id="PencilArrays_module-1"></a><a class="docs-heading-anchor-permalink" href="#PencilArrays_module" title="Permalink"></a></h1><p>The <a href="#PencilFFTs.PencilArrays"><code>PencilArrays</code></a> module defines types for handling MPI-distributed data.</p><p>The most important types are:</p><ul><li><p><a href="#PencilFFTs.PencilArrays.PencilArray"><code>PencilArray</code></a>: array wrapper including MPI decomposition information. Takes <em>local</em> indices starting at 1, regardless of the location of each MPI process on the global topology.</p></li><li><p><a href="#PencilFFTs.PencilArrays.GlobalPencilArray"><code>GlobalPencilArray</code></a>: <code>PencilArray</code> wrapper that takes <em>global</em> indices, which generally don't start at 1. See also <a href="#Global-views">Global views</a>.</p></li></ul><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.PencilArrays" id="PencilFFTs.PencilArrays"><code>PencilFFTs.PencilArrays</code></a> — <span class="docstring-category">Module</span></header><section><div><pre><code class="language-julia">PencilArrays</code></pre><p>Array wrappers for MPI-distributed data.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/PencilArrays.jl#L1-L5" target="_blank">source</a></section></article><h2 id="Construction"><a class="docs-heading-anchor" href="#Construction">Construction</a><a id="Construction-1"></a><a class="docs-heading-anchor-permalink" href="#Construction" title="Permalink"></a></h2><p>A <code>PencilArray</code> wrapper can be constructed from a <a href="../Pencils/#PencilFFTs.Pencils.Pencil"><code>Pencil</code></a> instance as</p><pre><code class="language-julia">pencil = Pencil(#= ... =#)
A = PencilArray(pencil)
parent(A)  # returns the allocated Array</code></pre><p>This allocates a new <code>Array</code> with the local dimensions and data type associated to the <code>Pencil</code>.</p><p>One can also construct a <code>PencilArray</code> wrapper from an existing <code>AbstractArray</code>, whose dimensions and type must be compatible with the <code>Pencil</code> configuration. For instance, the following works:</p><pre><code class="language-julia">T = eltype(pencil)
dims = size_local(pencil, permute=true)  # dimensions of data array must be permuted!
data = Array{T}(undef, dims)
A = PencilArray(pencil, data)</code></pre><p>Note that <code>data</code> does not need to be a <code>Array</code>, but can be any subtype of <code>AbstractArray</code>.</p><h2 id="Dimension-permutations"><a class="docs-heading-anchor" href="#Dimension-permutations">Dimension permutations</a><a id="Dimension-permutations-1"></a><a class="docs-heading-anchor-permalink" href="#Dimension-permutations" title="Permalink"></a></h2><p>Unlike the wrapped <code>AbstractArray</code>, the <code>PencilArray</code> wrapper takes non-permuted indices. For instance, if the underlying permutation of the <code>Pencil</code> is <code>(2, 3, 1)</code>, then <code>A[i, j, k]</code> points to the same value as <code>parent(A)[j, k, i]</code>.</p><h2 id="Global-views"><a class="docs-heading-anchor" href="#Global-views">Global views</a><a id="Global-views-1"></a><a class="docs-heading-anchor-permalink" href="#Global-views" title="Permalink"></a></h2><p><code>PencilArray</code>s are accessed using local indices that start at 1, regardless of the location of the subdomain associated to the local process on the global grid. Sometimes it may be more convenient to use global indices describing the position of the local process in the domain. For this, the <a href="#PencilFFTs.PencilArrays.global_view-Tuple{PencilArray}"><code>global_view</code></a> function is provided that generates an <a href="https://github.com/JuliaArrays/OffsetArrays.jl"><code>OffsetArray</code></a> wrapper taking global indices. For more details, see for instance <a href="../examples/gradient/#gradient_method_global">the gradient example</a>.</p><h2 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.PencilArrays.PencilArray" id="PencilFFTs.PencilArrays.PencilArray"><code>PencilFFTs.PencilArrays.PencilArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">PencilArray(pencil::Pencil, data::AbstractArray{T,N})</code></pre><p>Create array wrapper with pencil decomposition information.</p><p>The array dimensions and element type must be consistent with those of the given pencil.</p><div class="admonition is-info"><header class="admonition-header">Index permutations</header><div class="admonition-body"><p>If the <code>Pencil</code> has an associated index permutation, then <code>data</code> must have its dimensions permuted accordingly.</p><p>Unlike <code>data</code>, the resulting <code>PencilArray</code> should be accessed with unpermuted indices.</p><h5>Example</h5><p>Suppose <code>pencil</code> has local dimensions <code>(10, 20, 30)</code> before permutation, and has an asociated permutation <code>(2, 3, 1)</code>. Then:</p><pre><code class="language-julia">data = zeros(20, 30, 10)       # parent array (with permuted dimensions)

u = PencilArray(pencil, data)  # wrapper with dimensions (10, 20, 30)
@assert size(u) === (10, 20, 30)

u[15, 25, 5]          # BoundsError (15 &gt; 10 and 25 &gt; 20)
u[5, 15, 25]          # correct
parent(u)[15, 25, 5]  # correct
</code></pre></div></div><div class="admonition is-info"><header class="admonition-header">Extra dimensions</header><div class="admonition-body"><p>The data array can have one or more extra dimensions to the right (slow indices), which are not affected by index permutations.</p><h5>Example</h5><pre><code class="language-julia">dims = (20, 30, 10)
PencilArray(pencil, zeros(dims...))        # works (scalar)
PencilArray(pencil, zeros(dims..., 3))     # works (3-component vector)
PencilArray(pencil, zeros(dims..., 4, 3))  # works (4×3 tensor)
PencilArray(pencil, zeros(3, dims...))     # fails</code></pre></div></div><hr/><pre><code class="language-none">PencilArray(pencil::Pencil, [extra_dims=()])</code></pre><p>Allocate an uninitialised <code>PencilArray</code> that can hold data in the local pencil.</p><p>Extra dimensions, for instance representing vector components, can be specified. These dimensions are added to the rightmost (slowest) indices of the resulting array.</p><p><strong>Example</strong></p><p>Suppose <code>pencil</code> has local dimensions <code>(20, 10, 30)</code> after permutation. Then:</p><pre><code class="language-julia">PencilArray(pencil)          # array dimensions are (20, 10, 30)
PencilArray(pencil, (4, 3))  # array dimensions are (20, 10, 30, 4, 3)</code></pre></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L1-L65" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.PencilArrays.GlobalPencilArray" id="PencilFFTs.PencilArrays.GlobalPencilArray"><code>PencilFFTs.PencilArrays.GlobalPencilArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">GlobalPencilArray{T,N} &lt;: AbstractArray{T,N}</code></pre><p>Alias for an <code>OffsetArray</code> wrapping a <a href="#PencilFFTs.PencilArrays.PencilArray"><code>PencilArray</code></a>.</p><p>Unlike <code>PencilArray</code>s, <code>GlobalPencilArray</code>s take <em>global</em> indices, which in general don't start at 1 for a given MPI process.</p><p>The <a href="#PencilFFTs.PencilArrays.global_view-Tuple{PencilArray}"><code>global_view</code></a> function should be used to create a <code>GlobalPencilArray</code> from a <code>PencilArray</code>.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/global_view.jl#L1-L11" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.PencilArrays.PencilArrayCollection" id="PencilFFTs.PencilArrays.PencilArrayCollection"><code>PencilFFTs.PencilArrays.PencilArrayCollection</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia">PencilArrayCollection</code></pre><p><code>UnionAll</code> type describing a collection of <a href="#PencilFFTs.PencilArrays.PencilArray"><code>PencilArray</code></a>s.</p><p>Such a collection can be a tuple or an array of <code>PencilArray</code>s.</p><p>Collections are <strong>by assumption</strong> homogeneous: each array has the same properties, and in particular, is associated to the same <a href="../Pencils/#PencilFFTs.Pencils.Pencil"><code>Pencil</code></a> configuration.</p><p>For convenience, certain operations defined for <code>PencilArray</code> are also defined for <code>PencilArrayCollection</code>, and return the same value as for a single <code>PencilArray</code>. Some examples are <a href="#PencilFFTs.PencilArrays.pencil-Tuple{PencilArray}"><code>pencil</code></a>, <a href="#PencilFFTs.Pencils.range_local-Tuple{Union{PencilArray, Union{Tuple{Vararg{A,N} where N}, AbstractArray{A,N} where N} where A&lt;:PencilArray}}"><code>range_local</code></a> and <a href="../MPITopology/#PencilFFTs.Pencils.MPITopologies.get_comm-Tuple{MPITopology}"><code>get_comm</code></a>.</p><p>Also note that functions from <code>Base</code>, such as <code>size</code> or <code>ndims</code>, are <strong>not</strong> overloaded for <code>PencilArrayCollection</code>, since they already have a definition for tuples and arrays (and redefining them would be type piracy...).</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L109-L129" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.PencilArrays.MaybePencilArrayCollection" id="PencilFFTs.PencilArrays.MaybePencilArrayCollection"><code>PencilFFTs.PencilArrays.MaybePencilArrayCollection</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia">MaybePencilArrayCollection</code></pre><p><code>UnionAll</code> type representing either a <a href="#PencilFFTs.PencilArrays.PencilArray"><code>PencilArray</code></a> or a collection of <a href="#PencilFFTs.PencilArrays.PencilArray"><code>PencilArray</code></a>s.</p><p>See also <a href="#PencilFFTs.PencilArrays.PencilArrayCollection"><code>PencilArrayCollection</code></a>.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L136-L143" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.PencilArrays.ManyPencilArray" id="PencilFFTs.PencilArrays.ManyPencilArray"><code>PencilFFTs.PencilArrays.ManyPencilArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ManyPencilArray{T,N,M}</code></pre><p>Container holding <code>M</code> different <a href="#PencilFFTs.PencilArrays.PencilArray"><code>PencilArray</code></a> views to the same underlying data buffer. All views share the same element type <code>T</code> and dimensionality <code>N</code>.</p><p>This can be useful to perform in-place operations on <code>PencilArray</code> data.</p><hr/><pre><code class="language-none">ManyPencilArray(pencils...; extra_dims=())</code></pre><p>Create a <code>ManyPencilArray</code> container that can hold data associated to all the given <a href="../Pencils/#PencilFFTs.Pencils.Pencil"><code>Pencil</code></a>s.</p><p>The optional <code>extra_dims</code> argument is the same as for <a href="#PencilFFTs.PencilArrays.PencilArray"><code>PencilArray</code></a>.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/multiarrays.jl#L1-L18" target="_blank">source</a></section></article><h2 id="Methods"><a class="docs-heading-anchor" href="#Methods">Methods</a><a id="Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Methods" title="Permalink"></a></h2><h3 id="PencilArray"><a class="docs-heading-anchor" href="#PencilArray">PencilArray</a><a id="PencilArray-1"></a><a class="docs-heading-anchor-permalink" href="#PencilArray" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.PencilArrays.extra_dims-Tuple{PencilArray}" id="PencilFFTs.PencilArrays.extra_dims-Tuple{PencilArray}"><code>PencilFFTs.PencilArrays.extra_dims</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">extra_dims(x::PencilArray)
extra_dims(x::PencilArrayCollection)</code></pre><p>Return tuple with size of "extra" dimensions of <code>PencilArray</code>.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L292-L297" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.Pencils.MPITopologies.get_comm-Tuple{Union{PencilArray, Union{Tuple{Vararg{A,N} where N}, AbstractArray{A,N} where N} where A&lt;:PencilArray}}" id="PencilFFTs.Pencils.MPITopologies.get_comm-Tuple{Union{PencilArray, Union{Tuple{Vararg{A,N} where N}, AbstractArray{A,N} where N} where A&lt;:PencilArray}}"><code>PencilFFTs.Pencils.MPITopologies.get_comm</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">get_comm(x::PencilArray)
get_comm(x::PencilArrayCollection)</code></pre><p>Get MPI communicator associated to a pencil-distributed array.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L326-L331" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.Pencils.get_permutation-Tuple{Union{PencilArray, Union{Tuple{Vararg{A,N} where N}, AbstractArray{A,N} where N} where A&lt;:PencilArray}}" id="PencilFFTs.Pencils.get_permutation-Tuple{Union{PencilArray, Union{Tuple{Vararg{A,N} where N}, AbstractArray{A,N} where N} where A&lt;:PencilArray}}"><code>PencilFFTs.Pencils.get_permutation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">get_permutation(x::PencilArray)
get_permutation(x::PencilArrayCollection)</code></pre><p>Get index permutation associated to the given <code>PencilArray</code>.</p><p>Returns <code>NoPermutation()</code> if there is no associated permutation.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L334-L341" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.PencilArrays.global_view-Tuple{PencilArray}" id="PencilFFTs.PencilArrays.global_view-Tuple{PencilArray}"><code>PencilFFTs.PencilArrays.global_view</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">global_view(x::PencilArray)</code></pre><p>Create an <a href="https://github.com/JuliaArrays/OffsetArrays.jl"><code>OffsetArray</code></a> of a <code>PencilArray</code> that takes unpermuted global indices.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/global_view.jl#L14-L19" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.PencilArrays.ndims_extra-Tuple{Union{PencilArray, Union{Tuple{Vararg{A,N} where N}, AbstractArray{A,N} where N} where A&lt;:PencilArray}}" id="PencilFFTs.PencilArrays.ndims_extra-Tuple{Union{PencilArray, Union{Tuple{Vararg{A,N} where N}, AbstractArray{A,N} where N} where A&lt;:PencilArray}}"><code>PencilFFTs.PencilArrays.ndims_extra</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">ndims_extra(x::PencilArray)
ndims_extra(x::PencilArrayCollection)</code></pre><p>Number of "extra" dimensions associated to <code>PencilArray</code>.</p><p>These are the dimensions that are not associated to the domain geometry. For instance, they may correspond to vector or tensor components.</p><p>These dimensions correspond to the rightmost indices of the array.</p><p>The total number of dimensions of a <code>PencilArray</code> is given by:</p><pre><code class="language-none">ndims(x) == ndims_space(x) + ndims_extra(x)</code></pre></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L258-L273" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.PencilArrays.ndims_space-Tuple{PencilArray}" id="PencilFFTs.PencilArrays.ndims_space-Tuple{PencilArray}"><code>PencilFFTs.PencilArrays.ndims_space</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">ndims_space(x::PencilArray)
ndims_space(x::PencilArrayCollection)</code></pre><p>Number of dimensions associated to the domain geometry.</p><p>These dimensions correspond to the leftmost indices of the array.</p><p>The total number of dimensions of a <code>PencilArray</code> is given by:</p><pre><code class="language-none">ndims(x) == ndims_space(x) + ndims_extra(x)</code></pre></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L276-L288" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#Base.parent-Tuple{PencilArray}" id="Base.parent-Tuple{PencilArray}"><code>Base.parent</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">parent(x::PencilArray)</code></pre><p>Return array wrapped by a <code>PencilArray</code>.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L237-L241" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.PencilArrays.pencil-Tuple{PencilArray}" id="PencilFFTs.PencilArrays.pencil-Tuple{PencilArray}"><code>PencilFFTs.PencilArrays.pencil</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">pencil(x::PencilArray)</code></pre><p>Return decomposition configuration associated to a <code>PencilArray</code>.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L229-L233" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#Base.pointer-Tuple{PencilArray}" id="Base.pointer-Tuple{PencilArray}"><code>Base.pointer</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">pointer(x::PencilArray)</code></pre><p>Return pointer to the start of the underlying data.</p><p>Use with caution: this may not make a lot of sense if the underlying data is not contiguous or strided (e.g. if the <code>PencilArray</code> is wrapping a non-strided <code>SubArray</code>).</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L247-L255" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.Pencils.range_local-Tuple{Union{PencilArray, Union{Tuple{Vararg{A,N} where N}, AbstractArray{A,N} where N} where A&lt;:PencilArray}}" id="PencilFFTs.Pencils.range_local-Tuple{Union{PencilArray, Union{Tuple{Vararg{A,N} where N}, AbstractArray{A,N} where N} where A&lt;:PencilArray}}"><code>PencilFFTs.Pencils.range_local</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">range_local(x::PencilArray; permute=false)
range_local(x::PencilArrayCollection; permute=false)</code></pre><p>Local data range held by the <code>PencilArray</code>.</p><p>By default the dimensions are not permuted, i.e. they are returned in logical order.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L314-L322" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#Base.size-Tuple{PencilArray}" id="Base.size-Tuple{PencilArray}"><code>Base.size</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">size(x::PencilArray)</code></pre><p>Return logical (unpermuted) local dimensions of a <code>PencilArray</code>.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L154-L158" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.Pencils.size_local-Tuple{Union{PencilArray, Union{Tuple{Vararg{A,N} where N}, AbstractArray{A,N} where N} where A&lt;:PencilArray}}" id="PencilFFTs.Pencils.size_local-Tuple{Union{PencilArray, Union{Tuple{Vararg{A,N} where N}, AbstractArray{A,N} where N} where A&lt;:PencilArray}}"><code>PencilFFTs.Pencils.size_local</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">size_local(x::PencilArray; permute=false)
size_local(x::PencilArrayCollection; permute=false)</code></pre><p>Local dimensions of the data held by the <code>PencilArray</code>.</p><p>If <code>permute=false</code>, this is the same as <code>size(x)</code>.</p><p>See also <a href="../Pencils/#PencilFFTs.Pencils.size_local-Tuple{Pencil}"><code>size_local(::Pencil)</code></a>.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L161-L170" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#PencilFFTs.Pencils.size_global-Tuple{Union{PencilArray, Union{Tuple{Vararg{A,N} where N}, AbstractArray{A,N} where N} where A&lt;:PencilArray}}" id="PencilFFTs.Pencils.size_global-Tuple{Union{PencilArray, Union{Tuple{Vararg{A,N} where N}, AbstractArray{A,N} where N} where A&lt;:PencilArray}}"><code>PencilFFTs.Pencils.size_global</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">size_global(x::PencilArray; permute=false)
size_global(x::PencilArrayCollection; permute=false)</code></pre><p>Global dimensions associated to the given array.</p><p>By default, the logical (unpermuted) dimensions of the dataset are returned.</p><p>See also <a href="../Pencils/#PencilFFTs.Pencils.size_global-Tuple{Pencil}"><code>size_global(::Pencil)</code></a>.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/arrays.jl#L301-L310" target="_blank">source</a></section></article><h3 id="ManyPencilArray"><a class="docs-heading-anchor" href="#ManyPencilArray">ManyPencilArray</a><a id="ManyPencilArray-1"></a><a class="docs-heading-anchor-permalink" href="#ManyPencilArray" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" href="#Base.first-Tuple{ManyPencilArray}" id="Base.first-Tuple{ManyPencilArray}"><code>Base.first</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">first(A::ManyPencilArray)</code></pre><p>Returns the first <a href="#PencilFFTs.PencilArrays.PencilArray"><code>PencilArray</code></a> wrapped by <code>A</code>.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/multiarrays.jl#L64-L68" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#Base.getindex-Tuple{ManyPencilArray}" id="Base.getindex-Tuple{ManyPencilArray}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">getindex(A::ManyPencilArray, ::Val{i})
getindex(A::ManyPencilArray, i::Integer)</code></pre><p>Returns the i-th <a href="#PencilFFTs.PencilArrays.PencilArray"><code>PencilArray</code></a> wrapped by <code>A</code>.</p><p>If possible, the <code>Val{i}</code> form should be preferred, as it is more efficient and it allows the compiler to know the return type.</p><p>See also <a href="#Base.first-Tuple{ManyPencilArray}"><code>first(::ManyPencilArray)</code></a>, <a href="#Base.last-Tuple{ManyPencilArray}"><code>last(::ManyPencilArray)</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia">A = ManyPencilArray(pencil1, pencil2, pencil3)

# Get the PencilArray associated to `pencil2`.
# u2 = A[2]
u2 = A[Val(2)]  # faster!</code></pre></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/multiarrays.jl#L78-L98" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#Base.last-Tuple{ManyPencilArray}" id="Base.last-Tuple{ManyPencilArray}"><code>Base.last</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">last(A::ManyPencilArray)</code></pre><p>Returns the last <a href="#PencilFFTs.PencilArrays.PencilArray"><code>PencilArray</code></a> wrapped by <code>A</code>.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/multiarrays.jl#L71-L75" target="_blank">source</a></section></article><article class="docstring"><header><a class="docstring-binding" href="#Base.length-Tuple{ManyPencilArray}" id="Base.length-Tuple{ManyPencilArray}"><code>Base.length</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">length(A::ManyPencilArray)</code></pre><p>Returns the number of <a href="#PencilFFTs.PencilArrays.PencilArray"><code>PencilArray</code></a>s wrapped by <code>A</code>.</p></div><a class="docs-sourcelink" href="https://github.com/jipolanco/PencilFFTs.jl/blob/b445f47139354e68235a14f3a64e21f1e8269c06/src/PencilArrays/multiarrays.jl#L57-L61" target="_blank">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Pencils/">« Pencil configurations</a><a class="docs-footer-nextpage" href="../Transpositions/">Global MPI operations »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label></p><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div><p></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 5 August 2020 13:50">Wednesday 5 August 2020</span>. Using Julia version 1.5.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></HTML>